FROM alpine:3.20

# Install runtime dependencies
RUN apk add --no-cache ca-certificates tzdata

# Create non-root user
RUN addgroup -g 1000 appuser && \
    adduser -D -u 1000 -G appuser appuser

# Copy the binary from GoReleaser build context
COPY baduk /usr/local/bin/baduk

# Use non-root user
USER appuser

# Expose port
EXPOSE 4000

# Run the binary
ENTRYPOINT ["baduk"]
